---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const notes = await getCollection('notes');
const noteCount = notes.length;
---

<Layout title="CodiMD Search">
	<h1>CodiMD Search</h1>
	<div class="stats">検索対象: {noteCount} 件</div>
	<div id="search" class="search-container"></div>

	<script is:inline>
		window.addEventListener('DOMContentLoaded', (event) => {
			new PagefindUI({ element: "#search", showSubResults: true });
		});
	</script>
</Layout>

<style>
	.stats {
		color: #666;
		font-size: 0.9rem;
		margin-bottom: 1rem;
	}

	.search-container {
		margin-top: 2rem;
	}
</style>
